---
title: 'Lab 1: Question 2'
author: "Jun Qian, Lucas Schroyer, Ryan Mitchell, Oliver Chang"
output:
  html_document:
    df_print: paged
  word_document: default
---

```{r load packages, echo=TRUE, warning=FALSE, message=FALSE}
library(dplyr)
library(ggplot2) 
library(tidyverse) # if you want more, but still core, toolkit
library(plotly)
library(weights)
```

```{r load and clean data, echo=FALSE, warning=TRUE, message=FALSE}

anes_timeseries_raw2 <- readRDS(file = "Data/anes_key_fields.rds")
anes_timeseries_raw2 %>% glimpse()

anes_timeseries_raw2 %>% nrow()
# 8280 rows

#filter to democratic voters
anes_timeseries_q2 <- anes_timeseries_raw2 %>% 
  filter((voted_early_in_gen_election == 1 | 
           plan_to_vote_in_gen_election == 1) & 
           party_of_registration_str == "Democrat")

anes_timeseries_q2 %>% nrow()
# 1833 rows

```


## Importance and Context
<!-- You can (and should delete each of these comments lines in your final report) --> 
<!-- Explain why the reader should care about your research question. -->

2. Are Democratic voters more enthusiastic about Joe Biden or Kamala Harris?

- Interval Data 
How would you rate:
Kamala Harris
0-100. Actual value
998. Don’t know (don’t know where to rate)
999. Don’t recognize (don’t know who this is)
-4. Technical error
-9. Refused

## Description of Data
<!-- Explain how your research question is operationalized, including whether the variables you create are appropriate to study the concepts in question. --> 
<!-- What are some basic features of the data distribution? --> 
<!-- What changes do you make to the data and why? --> 

```{r load and clean data, echo=FALSE, warning=TRUE, message=FALSE}

data_q2 <- anes_timeseries_q2 %>% 
  filter(biden_rating >=0 & biden_rating <= 100 & harris_rating >=0 & harris_rating <= 100 &
         !is.na(biden_rating) & !is.na(harris_rating) & !is.na(weight_all_samples))
           


biden = select(data_q2, biden_rating)
hist(biden)
biden = as.numeric(unlist(biden))


harris = select(data_q2, harris_rating)
hist(harris)
harris = as.numeric(unlist(harris))

data = select(data_q2, biden_rating, harris_rating)



```

## Most appropriate test 
<!-- Explain which test is the most appropriate to answer your question and why it is the most appropriate --> 
<!-- List every assumption that your test requires and evaluate it. -->

```{r load and clean data, echo=FALSE, warning=TRUE, message=FALSE}

weights_1 = select(data_q2, weight_all_samples)
weights_1 = as.numeric(unlist(weights_1))


wtd.t.test(harris, biden, weights_1, samedata=TRUE,
alternative="two.tailed")


```

## Test, results and interpretation
<!-- What are the results of your test? --> 
<!-- What do the results of this test mean? What is the practical significance? --> 










